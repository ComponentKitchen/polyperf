<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Native JS: createdCallback</title>

  <script src="lib/webcomponents.js"></script>
  <script src="build/js-web-components.js"></script>
  <script src="node_modules/basic-list-box/dist/basic-list-box.js"></script>
  <link rel="import" href="polymer-packages/poly-component-1/src/poly-component-1.html">

  <script>
    var numTests = 1;
    var componentElement = null;
    var timeStart, timeStop;
    var componentType = 'Polymer';

    var testList = [
      {name: 'CreatedCallback'}
    ];

    window.createdCallbackComplete = function() {
      //console.log('window.createdCallbackComplete');
    };

    function onTestButtonClick() {
      var inputElem = document.getElementById('loopTries');
      numTests = inputElem.value;

      var componentTypeElem = document.getElementById('componentType');
      componentType = componentTypeElem.selectedItem.textContent;

      timeStart = performance.now();

      for (var i = 0; i < numTests; i++) {
        runTestInstance();
      }

      timeStop = performance.now();
      var reportString = numTests + ' runs completed. ' + (timeStop - timeStart).toFixed(4) + ' milliseconds';
      var reportElem = document.createElement('div');
      reportElem.innerHTML = reportString;
      document.body.appendChild(reportElem);
    }

    function runTestInstance() {
      if (componentElement) {
        componentElement.parentNode.removeChild(componentElement);
        componentElement = null;
      }

      var tag;
      switch (componentType) {
        case 'Polymer':
        default:
          tag = 'poly-component-1';
          break;

        case 'JavaScript':
          tag = 'js-component-1';
          break;
      }
      componentElement = document.createElement(tag);
      document.body.appendChild(componentElement);
    }

  </script>

</head>

<body>
  <h3>Timing tests for native JavaScript versus Polymer 1.0 components</h3>

  <h3>Tests:</h3>
  <basic-list-box id="testList" selection-required="true" aria-label="Tests" style="height: 50px; max-width: 250px;">
    <div>CreatedCallback</div>
  </basic-list-box>

  <h3>Component type:</h3>
  <basic-list-box id="componentType" selection-required="true" aria-label="Component type" style="height: 50px; max-width: 250px; margin-top: 20px">
    <div>Polymer</div>
    <div>JavaScript</div>
  </basic-list-box>

  <div style="margin-top: 40px;">
    <span>Test runs:</span>
    <input type="number" id="loopTries" value="1">
    <input type="button" value="Test" onclick="onTestButtonClick()">
  </div>
</body>

</html>
